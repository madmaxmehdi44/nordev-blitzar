# Migration `20201021085542-add-votes-on-requests`

This migration has been generated by Shaun Church at 10/21/2020, 9:55:42 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "VotesOnRequests" (
    "createdAt" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "updatedAt" DATETIME NOT NULL,
    "requestId" INTEGER NOT NULL,
    "userId" INTEGER NOT NULL,

    FOREIGN KEY ("requestId") REFERENCES "Request"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("userId") REFERENCES "User"("id") ON DELETE CASCADE ON UPDATE CASCADE,
PRIMARY KEY ("requestId","userId")
)
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201021084434-request-title-required..20201021085542-add-votes-on-requests
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -12,18 +12,19 @@
 // --------------------------------------
 model User {
-  id             Int       @id @default(autoincrement())
-  createdAt      DateTime  @default(now())
-  updatedAt      DateTime  @updatedAt
-  name           String?
-  email          String    @unique
-  hashedPassword String?
-  role           String    @default("user")
-  sessions       Session[]
-  products       Product[]
-  requests       Request[]
+  id              Int               @id @default(autoincrement())
+  createdAt       DateTime          @default(now())
+  updatedAt       DateTime          @updatedAt
+  name            String?
+  email           String            @unique
+  hashedPassword  String?
+  role            String            @default("user")
+  sessions        Session[]
+  products        Product[]
+  requests        Request[]
+  votesOnRequests VotesOnRequests[]
 }
 model Session {
   id                 Int       @id @default(autoincrement())
@@ -50,14 +51,26 @@
   requests    Request[]
 }
 model Request {
-  id          Int      @id @default(autoincrement())
-  createdAt   DateTime @default(now())
-  updatedAt   DateTime @updatedAt
-  title       String
-  description String?
-  product     Product  @relation(fields: [productId], references: [id])
-  productId   Int
-  user        User?    @relation(fields: [userId], references: [id])
-  userId      Int?
+  id             Int               @id @default(autoincrement())
+  createdAt      DateTime          @default(now())
+  updatedAt      DateTime          @updatedAt
+  title          String
+  description    String?
+  product        Product           @relation(fields: [productId], references: [id])
+  productId      Int
+  user           User?             @relation(fields: [userId], references: [id])
+  userId         Int?
+  votesOnRequest VotesOnRequests[]
 }
+
+model VotesOnRequests {
+  createdAt DateTime @default(now())
+  updatedAt DateTime @updatedAt
+  request   Request  @relation(fields: [requestId], references: [id])
+  requestId Int
+  user      User     @relation(fields: [userId], references: [id])
+  userId    Int
+
+  @@id([requestId, userId])
+}
```


